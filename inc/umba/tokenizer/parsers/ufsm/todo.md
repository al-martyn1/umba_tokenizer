- [TODO List](#todo-list)

# TODO List

- [ ] При чтении секций events, actions, states, predicates, transitions для них можно задать опцию override.
      Эта опция для секции нигде не сохраняется, но сохраняется во флагах отдельных элементов.
      Для отдельного же элемента нет языкового механизма задать этот флаг, и поэтому либо у всех элементов
      этот флаг установлен, либо его нет. При сериализации проверяем первый элемент секции, и ставим его для
      всей секции, а при сериализации элементов этот флаг не учитываем.
      Хотя, стоп. У нас всё содержимое секций складывается в единый список, даже если читается из разных
      одноимённых фрагментов. Тогда, при сериализации, их надо объединять в разные группы по признаку override.

- [ ] Нужно сделать флаг парсера - нужна полная сборка определений, или нет - completeDefinition.
      Изначально по структурам разложено только то, что считывается из файла с иходными текстами атвомата.
      Такое представление нужно для обратной сериализации для сравнения с исходником, на предмет поиска ошибок разбора,
      но оно не годится для генерации автомата - нужна сборка полного определения из всех родительских определений.

- [ ] Сделать сериализацию - для проверки корректности парсера. Сохранение после чтения исходного текста,
      последующее чтение уже сохранённого, и повторное сохранение должны давать одинаковый результат.
      Также сериализация нужна для проверки корректности объединения автоматов в финальный полностью определённый.

- [ ] Сделать сборку полного определения автомата для последующей генерации кода и визуального представления.
      Правила сборки:
    - для каждого родительского автомата или дефиниций можно задать флаги override, для каждого типа секций.
    - начинаем с первого родителя, он берётся за базу.
    - каждого последующего родителя добавляем так: если нет совпадения, то просто добавляем. Если такой
      элемент уже есть в собираемом автомате, и нет флага override, то это ошибка. Если флаг override есть,
      то перезаписываем элемент.
    - после обработки списка родителей добавляем элементы, объявленные непосредственно в текущем автомате.

    - [ ] Обработка переходов.
        - Переходы сортируем с учетом порядка определения и наличия состояний и событий ANY (они идут в конце).
          По ANY такая градация - noAny, partialAny, cleanAny.
        - При слиянии добавляем все переходы без ANY, разбивая их на отдельные элементарные переходы.
          При этом проверяем существование такого перехода и обрабатываем, как и в остальных секциях, с учетом
          override.
        - Потом добавляем переходы с ANY. Переходы с ANY не раскрываем, они раскрываются только при генерации
          корда или при визуализации.


